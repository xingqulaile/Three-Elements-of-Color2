# æ•°æ®æŸ¥çœ‹æŒ‡å—

ç°åœ¨ä½ çš„åº”ç”¨å·²å®Œå…¨é…ç½®åˆ° Supabaseï¼ä»¥ä¸‹æ˜¯æŸ¥çœ‹æ•°æ®çš„å®Œæ•´æŒ‡å—ã€‚

---

## ğŸ“ æŸ¥çœ‹å­¦ç”Ÿå„é¡¹æˆç»©

### æ–¹å¼ 1ï¼šæ•™å¸ˆç®¡ç†åå°ï¼ˆæ¨èï¼‰
è¿™æ˜¯æŸ¥çœ‹å­¦ç”Ÿæˆç»©æœ€ä¾¿æ·çš„æ–¹å¼ã€‚

**æ­¥éª¤ï¼š**
1. æ‰“å¼€åº”ç”¨ â†’ http://192.168.31.70:3000
2. ç‚¹å‡» "æ•™å¸ˆç®¡ç†åå°"
3. è¾“å…¥ç®¡ç†å‘˜è´¦å·ï¼š
   - ç”¨æˆ·å: `admin`
   - å¯†ç : `142587`
4. è¿›å…¥åå°åå¯ä»¥çœ‹åˆ°ï¼š
   - âœ… **å­¦ç”Ÿåå•** - æ‰€æœ‰å­¦ç”ŸåŠå…¶æ€»ç§¯åˆ†
   - âœ… **å®Œæ•´æˆç»©** - æ¯ä¸ªå­¦ç”Ÿå„å…³çš„æˆç»©ã€å¾—åˆ†ã€è€—æ—¶ã€æç¤ºä½¿ç”¨æƒ…å†µ
   - âœ… **é”™è¯¯åˆ†æ** - å­¦ç”Ÿå›ç­”é”™è¯¯çš„è®°å½•åˆ†æ

### æ–¹å¼ 2ï¼šSupabase æ§åˆ¶é¢æ¿ï¼ˆæŠ€æœ¯æŸ¥çœ‹ï¼‰
å¦‚æœä½ éœ€è¦åŸå§‹æ•°æ®æˆ–è¿›è¡Œæ•°æ®åˆ†æï¼Œå¯ä»¥ç›´æ¥åœ¨ Supabase ä¸­æŸ¥çœ‹ã€‚

**æ­¥éª¤ï¼š**
1. ç™»å½• Supabase æ§åˆ¶é¢æ¿
2. è¿›å…¥é¡¹ç›® "Three-essential-elements-of-color"
3. ç‚¹å‡»å·¦ä¾§ **"Table Editor"**
4. æŸ¥çœ‹ä»¥ä¸‹è¡¨æ ¼ï¼š

#### è¡¨ 1: `students` - å­¦ç”ŸåŸºæœ¬ä¿¡æ¯
| å­—æ®µ | è¯´æ˜ |
|------|------|
| id | å­¦ç”Ÿå”¯ä¸€ ID |
| name | å­¦ç”Ÿåå­— |
| class_name | ç­çº§åç§° |
| total_score | æ€»ç§¯åˆ† |
| completed | æ˜¯å¦å®Œæˆå…¨éƒ¨æ¸¸æˆ |
| created_at | åˆ›å»ºæ—¶é—´ |

#### è¡¨ 2: `game_records` - å…³å¡æˆç»©è¯¦æƒ…
| å­—æ®µ | è¯´æ˜ |
|------|------|
| id | è®°å½• ID |
| student_id | å…³è”çš„å­¦ç”Ÿ ID |
| level_number | å…³å¡å· (1-5) |
| is_correct | æ˜¯å¦ç­”å¯¹ |
| attempts | å°è¯•æ¬¡æ•° |
| time_spent | èŠ±è´¹æ—¶é—´ï¼ˆç§’ï¼‰ |
| hints_used | ä½¿ç”¨æç¤ºæ•° |
| score | è·å¾—ç§¯åˆ† |
| created_at | æäº¤æ—¶é—´ |

**æŸ¥è¯¢ç¤ºä¾‹ï¼š** æŸ¥çœ‹æ‰€æœ‰å­¦ç”Ÿçš„å…³å¡è®°å½•
```sql
SELECT 
  s.name,
  s.class_name,
  gr.level_number,
  gr.is_correct,
  gr.score,
  gr.time_spent,
  gr.attempts,
  gr.hints_used
FROM game_records gr
JOIN students s ON gr.student_id = s.id
ORDER BY s.name, gr.level_number;
```

---

## ğŸ¨ æŸ¥çœ‹å­¦ç”Ÿæäº¤çš„ç”»ä½œ

### æ–¹å¼ 1ï¼šæ•™å¸ˆç®¡ç†åå°
1. æ‰“å¼€ç®¡ç†åå°ï¼ˆåŒä¸Šï¼‰
2. æ‰¾åˆ° **"å­¦ç”Ÿåˆ›æ„ä½œå“"** æˆ– **"è‰ºæœ¯ä½œå“"** åŒºåŸŸ
3. å¯ä»¥çœ‹åˆ°æ¯ä¸ªå­¦ç”Ÿåœ¨ç¬¬äº”å…³åˆ›å»ºçš„ç”»ä½œ

### æ–¹å¼ 2ï¼šSupabase è¡¨æŸ¥çœ‹

**æ­¥éª¤ï¼š**
1. ç™»å½• Supabase æ§åˆ¶é¢æ¿
2. ç‚¹å‡»å·¦ä¾§ **"Table Editor"**
3. é€‰æ‹© **`artworks` è¡¨**

#### `artworks` è¡¨ç»“æ„
| å­—æ®µ | è¯´æ˜ |
|------|------|
| id | ä½œå“ ID |
| student_id | å­¦ç”Ÿ ID |
| image_data | ç”»ä½œçš„ Base64 å›¾åƒæ•°æ® |
| color_settings | è‰²å½©è®¾ç½® JSONï¼ˆåŒ…å«å„ä¸ªé¢œè‰²ç»„ä»¶çš„ H/S/L å€¼ï¼‰ |
| created_at | åˆ›å»ºæ—¶é—´ |

**image_data å­—æ®µè¯´æ˜ï¼š**
- è¿™æ˜¯ Base64 ç¼–ç çš„å›¾åƒæ•°æ®ï¼Œå¯ä»¥ç›´æ¥åœ¨æµè§ˆå™¨ä¸­æŸ¥çœ‹
- ç‚¹å‡»è¯¥å­—æ®µçš„å†…å®¹ï¼Œå¯ä»¥å±•å¼€å®Œæ•´çš„ Base64 å­—ç¬¦ä¸²
- ä½ å¯ä»¥å°†å…¶å¤åˆ¶åˆ° Base64 è§£ç å·¥å…·ä¸­æŸ¥çœ‹åŸå§‹å›¾åƒ

**color_settings å­—æ®µç¤ºä¾‹ï¼š**
```json
{
  "face": { "h": 320, "s": 82, "l": 54 },
  "body": { "h": 45, "s": 91, "l": 60 },
  "wings": { "h": 280, "s": 100, "l": 50 }
}
```

---

## ğŸ“Š å…¶ä»–æ•°æ®è¡¨è¯´æ˜

### `wrong_answers` è¡¨ - é”™è¯¯ç­”æ¡ˆè®°å½•
è®°å½•å­¦ç”Ÿåœ¨å„å…³å¡ç­”é¢˜é”™è¯¯çš„æƒ…å†µï¼Œç”¨äºåˆ†æè–„å¼±ç¯èŠ‚ã€‚

| å­—æ®µ | è¯´æ˜ |
|------|------|
| id | è®°å½• ID |
| student_id | å­¦ç”Ÿ ID |
| level_number | å…³å¡å· |
| target_value | ç›®æ ‡è‰²å€¼ `{h, s, l}` |
| student_answer | å­¦ç”Ÿç­”æ¡ˆ `{h, s, l}` |
| created_at | æ—¶é—´ |

---

## ğŸ’¡ å¸¸è§æ“ä½œ

### å¯¼å‡ºå­¦ç”Ÿæˆç»©åˆ° CSV
1. è¿›å…¥ Supabase Table Editor
2. æ‰“å¼€ `game_records` è¡¨
3. ç‚¹å‡»å³ä¸Šè§’ **"Export"** æŒ‰é’®
4. é€‰æ‹©æ ¼å¼ï¼Œå¯¼å‡ºæ•°æ®åˆ° Excel

### æŸ¥çœ‹ç‰¹å®šå­¦ç”Ÿçš„è®°å½•
åœ¨ Supabase ä¸­ï¼š
1. æ‰“å¼€ `game_records` è¡¨
2. ç‚¹å‡» **"Filter"** æŒ‰é’®
3. é€‰æ‹© `student_id` = è¯¥å­¦ç”Ÿçš„ UUID
4. æŸ¥çœ‹è¯¥å­¦ç”Ÿçš„æ‰€æœ‰æˆç»©è®°å½•

### è®¡ç®—æŸå…³å¡çš„å¹³å‡æˆç»©
```sql
SELECT 
  level_number,
  COUNT(*) as å‚èµ›äººæ•°,
  AVG(score) as å¹³å‡æˆç»©,
  MAX(score) as æœ€é«˜åˆ†,
  MIN(score) as æœ€ä½åˆ†,
  COUNT(CASE WHEN is_correct THEN 1 END) as æ­£ç¡®æ¬¡æ•°,
  ROUND(100.0 * COUNT(CASE WHEN is_correct THEN 1 END) / COUNT(*), 2) as æ­£ç¡®ç‡ç™¾åˆ†æ¯”
FROM game_records
GROUP BY level_number
ORDER BY level_number;
```

---

## ğŸ¯ æ€»ç»“

âœ… **å­¦ç”Ÿæˆç»©æŸ¥çœ‹ï¼š**
- æ¨èä½¿ç”¨ **æ•™å¸ˆç®¡ç†åå°** æŸ¥çœ‹
- æˆ–åœ¨ Supabase çš„ **`game_records` è¡¨**ä¸­æŸ¥çœ‹åŸå§‹æ•°æ®

âœ… **å­¦ç”Ÿç”»ä½œæŸ¥çœ‹ï¼š**
- æ¨èä½¿ç”¨ **æ•™å¸ˆç®¡ç†åå°** æŸ¥çœ‹
- æˆ–åœ¨ Supabase çš„ **`artworks` è¡¨**ä¸­æŸ¥çœ‹ Base64 å›¾åƒæ•°æ®

âœ… **é”™è¯¯åˆ†æï¼š**
- åœ¨æ•™å¸ˆç®¡ç†åå°æŸ¥çœ‹å­¦ç”Ÿçš„é”™è¯¯ç­”æ¡ˆåˆ†æ
- æˆ–åœ¨ Supabase çš„ **`wrong_answers` è¡¨**ä¸­æŸ¥çœ‹åŸå§‹é”™è¯¯è®°å½•

ç¥ä½ ä½¿ç”¨æ„‰å¿«ï¼ğŸ‰
